
<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <title>On va déguster – Dernier épisode</title>
    <style>
        body { font-family: Arial, sans-serif; max-width: 700px; margin: 2rem auto; padding: 2rem; background: #fdfdfd; color: #333; }
        h1 { color: #b30000; }
        article { margin-top: 2rem; padding-top: 1rem; border-top: 1px solid #ccc; }
        .meta { color: #777; font-size: 0.9rem; margin-bottom: 0.8rem; }
    </style>
</head>
<body>
    <h1>On va déguster – Dernier épisode</h1>
    <p>Cette page est automatiquement mise à jour avec le dernier épisode publié. Idéale pour être scrappée par RSS.app.</p>

    <div id="latest-episode">Chargement…</div>

    <script>
    async function loadLatestEpisode() {
        const proxyUrl = "https://api.allorigins.win/get?url=";
        const rssUrl = encodeURIComponent("https://ftr.fivefilters.net/makefulltextfeed.php?fulltext=1&url=https%3A%2F%2Frss.app%2Ffeeds%2FcDUlVump3cVuaROC.xml");
        const url = proxyUrl + rssUrl;

        try {
            const res = await fetch(url);
            const data = await res.json();
            const parser = new DOMParser();
            const xml = parser.parseFromString(data.contents, "application/xml");
            const item = xml.querySelector("item");

            const title = item.querySelector("title").textContent;
            const pubDate = item.querySelector("pubDate").textContent;
            const content = item.getElementsByTagName("content:encoded")[0]?.textContent || "Contenu non disponible.";

            const container = document.getElementById("latest-episode");
            container.innerHTML = `
                <article>
                    <h2>${title}</h2>
                    <div class="meta">${pubDate}</div>
                    <div>${content}</div>
                </article>
            `;
        } catch (err) {
            document.getElementById("latest-episode").innerHTML = "<p>Erreur lors du chargement de l'épisode.</p>";
            console.error(err);
        }
    }

    loadLatestEpisode();
    </script>
</body>
</html>
